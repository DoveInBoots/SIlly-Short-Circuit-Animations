<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SillySC - Анимация векторной диаграммы</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #fff5f7;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Заголовок */
        header {
            background: linear-gradient(135deg, #ff66b2, #ff99cc);
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
            margin-bottom: 40px;
            border-radius: 0 0 20px 20px;
        }

        h1 {
            color: white;
            font-size: 3.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            letter-spacing: 3px;
            font-weight: 800;
        }

        h1 span {
            color: #ffe6f2;
            font-weight: 300;
        }

        .tagline {
            color: white;
            font-size: 1.2rem;
            margin-top: 10px;
            opacity: 0.9;
        }

        /* Основной контент */
        .content {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        /* Область графиков */
        .graphics-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(550px, 1fr));
            gap: 30px;
        }

        .graph-box {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.15);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 2px solid #ffccdd;
            text-align: center;
        }

        .graph-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(255, 105, 180, 0.25);
        }

        .graph-title {
            color: #ff66b2;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 2px dashed #ffccdd;
        }

        .graph-wrapper {
            position: relative;
            height: 416px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        svg {
            width: 900px;
            height: 100%;
            border: 3px solid #ff80c0;
            background: #ffffff;
            border-radius: 10px;
        }

        .trajectory {
            fill: none;
            stroke: #ff66aa;
            stroke-width: 2;
            opacity: 0.3;
        }

        .key-point {
            fill: #e2267b;
        }

        /* Панель управления */
        .controls {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.15);
            margin-top: 10px;
            border: 2px solid #ffccdd;
            text-align: center;
        }

        .controls h2 {
            color: #ff66b2;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .control-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        button {
            padding: 10px 20px;
            background: #ff66aa;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s, transform 0.2s;
            font-weight: 600;
        }

        button:hover {
            background: #e2267b;
            transform: translateY(-2px);
        }

        button:disabled {
            background: #ffb3d9;
            cursor: not-allowed;
            transform: none;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }

        .segment-controls {
            display: flex;
            gap: 5px;
            margin-top: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .segment-btn {
            padding: 8px 15px;
            font-size: 13px;
        }

        .current-segment {
            margin-top: 10px;
            font-weight: bold;
            color: #e2267b;
            font-size: 1.1rem;
        }

        /* Подвал */
        footer {
            margin-top: 40px;
            text-align: center;
            color: #ff66b2;
            font-size: 0.9rem;
            padding: 20px;
        }

        /* Адаптивность */
        @media (max-width: 1100px) {
            svg {
                width: 100%;
                max-width: 900px;
            }
        }

        @media (max-width: 768px) {
            .graphics-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .graph-box, .controls {
                padding: 20px;
            }
            
            .graph-wrapper {
                height: 350px;
            }
            
            svg {
                height: 350px;
            }
            
            .control-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 200px;
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }
            
            .graph-wrapper {
                height: 300px;
            }
            
            svg {
                height: 300px;
            }
            
            .graph-title, .controls h2 {
                font-size: 1.5rem;
            }
            
            .control-buttons button {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Silly<span>SC</span></h1>
            <p class="tagline">Анимация векторной диаграммы в розовом оформлении</p>
        </div>
    </header>

    <div class="container">
        <div class="content">
            <div class="graphics-container">
                <div class="graph-box">
                    <h2 class="graph-title">Анимация вращения генераторной ЭДС</h2>
                    <div class="graph-wrapper">
                        <svg>
                            <!-- Траектория вращения генераторной ЭДС -->
                            <circle cx="167" cy="208" r="125" class="trajectory" />
                            
                            <!-- Ключевые точки (пропорционально уменьшены) -->
                            <circle cx="167" cy="83" r="4" class="key-point" />
                            <circle cx="42" cy="208" r="4" class="key-point" />
                            <circle cx="167" cy="333" r="4" class="key-point" />
                            <circle cx="292" cy="208" r="4" class="key-point" />

                            <circle cx="375" cy="83" r="4" class="key-point" />
                            <circle cx="292" cy="167" r="4" class="key-point" />
                            <circle cx="375" cy="250" r="4" class="key-point" />
                            <circle cx="458" cy="167" r="4" class="key-point" />

                            <circle cx="667" cy="83" r="4" class="key-point" />
                            <circle cx="642" cy="108" r="4" class="key-point" />
                            <circle cx="667" cy="133" r="4" class="key-point" />
                            <circle cx="692" cy="108" r="4" class="key-point" />

                            <!-- Траектория вращения приёмной точки (коннектора) -->
                            <circle cx="667" cy="108" r="25" class="trajectory" />

                            <!-- Генераторная ЭДС Eg -->
                            <line id="eg" x1="167" y1="208" x2="167" y2="83" stroke="red" stroke-width="4" />

                            <!-- Розовая линия 180 градусов через центр первого круга -->
                            <line id="pinkLine" x1="42" y1="208" x2="790" y2="208" stroke="#ff66cc" stroke-width="2" />
                            
                            <!-- Соединяющая линия -->
                            <line id="conn" x1="167" y1="83" x2="790" y2="83" stroke="black" stroke-width="2" />
                            
                            <!-- Второй круг (средний) -->
                            <circle cx="375" cy="167" r="83" class="trajectory" />
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <h2>Управление анимацией</h2>
                
                <div class="control-buttons">
                    <button id="playPause">▶ Воспроизведение</button>
                    <button id="prevStep">⏮ Назад</button>
                    <button id="nextStep">⏭ Вперед</button>
                    <button id="reset"> Сброс</button>
                </div>
                
                <div class="speed-control">
                    <span>Скорость:</span>
                    <input type="range" id="speedSlider" min="0.5" max="5" step="0.5" value="1">
                    <span id="speedValue">1.0x</span>
                </div>
                
                <div class="current-segment">
                    Текущий сегмент: <span id="segmentIndicator">1/4</span>
                </div>
                
                <div class="segment-controls">
                    <button class="segment-btn" data-segment="0">Сегмент 1</button>
                    <button class="segment-btn" data-segment="1">Сегмент 2</button>
                    <button class="segment-btn" data-segment="2">Сегмент 3</button>
                    <button class="segment-btn" data-segment="3">Сегмент 4</button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>SillySC &copy; 2023 | Анимация векторной диаграммы в розовом оформлении</p>
        </footer>
    </div>

    <script>
        const eg = document.getElementById("eg");
        const conn = document.getElementById("conn");
        const playPauseBtn = document.getElementById("playPause");
        const prevStepBtn = document.getElementById("prevStep");
        const nextStepBtn = document.getElementById("nextStep");
        const resetBtn = document.getElementById("reset");
        const speedSlider = document.getElementById("speedSlider");
        const speedValue = document.getElementById("speedValue");
        const segmentIndicator = document.getElementById("segmentIndicator");
        const segmentBtns = document.querySelectorAll('.segment-btn');

        // Состояние анимации
        let animationId = null;
        let isPlaying = false;
        let startTime = performance.now();
        let pauseTime = 0;
        let speed = 1.0;
        
        // Сегменты анимации (4 четверти круга) - ПРОТИВ ЧАСОВОЙ СТРЕЛКИ
        const segments = [
            { start: 0, end: Math.PI / 2 },     // Сегмент 1: от 0° до 90°
            { start: Math.PI / 2, end: Math.PI }, // Сегмент 2: от 90° до 180°
            { start: Math.PI, end: 3 * Math.PI / 2 }, // Сегмент 3: от 180° до 270°
            { start: 3 * Math.PI / 2, end: 2 * Math.PI } // Сегмент 4: от 270° до 360°
        ];
        
        let currentSegment = 0;
        let segmentDirection = 1; // 1 = вперед (против часовой), -1 = назад (по часовой)
        let isManualSegment = false;

        // Ключевые точки (радианные углы) - ПРОТИВ ЧАСОВОЙ СТРЕЛКИ
        const keyPoints = [
            0,              // Верх (0°) - начальная точка
            Math.PI / 2,    // Право (90°) - следующая точка против часовой стрелки
            Math.PI,        // Низ (180°)
            3 * Math.PI / 2 // Лево (270°)
        ];

        // Обновление позиции вектора - ПРОТИВ ЧАСОВОЙ СТРЕЛКИ
        function updatePosition(angle) {
            // Для движения против часовой стрелки используем отрицательный угол
            const x = 167 + 125 * Math.sin(-angle);
            const y = 208 - 125 * Math.cos(-angle);
            
            eg.setAttribute("x2", x);
            eg.setAttribute("y2", y);
            conn.setAttribute("x1", x);
            conn.setAttribute("y1", y);
        }

        // Получение текущего угла - ПРОТИВ ЧАСОВОЙ СТРЕЛКИ
        function getCurrentAngle() {
            if (isManualSegment) {
                return keyPoints[currentSegment];
            }
            
            const elapsed = (performance.now() - startTime) * speed;
            const angle = (elapsed / 8000) * 2 * Math.PI;
            return angle % (2 * Math.PI);
        }

        // Обновление индикатора сегмента
        function updateSegmentIndicator() {
            segmentIndicator.textContent = `${currentSegment + 1}/4`;
            
            // Подсветка активной кнопки сегмента
            segmentBtns.forEach((btn, index) => {
                if (index === currentSegment) {
                    btn.style.background = '#e2267b';
                } else {
                    btn.style.background = '#ff66aa';
                }
            });
        }

        // Основной цикл анимации
        function animate() {
            if (!isPlaying && !isManualSegment) return;
            
            const angle = getCurrentAngle();
            updatePosition(angle);
            
            // Определение текущего сегмента при автоматической анимации
            if (!isManualSegment) {
                const normalizedAngle = angle % (2 * Math.PI);
                for (let i = 0; i < segments.length; i++) {
                    if (normalizedAngle >= segments[i].start && normalizedAngle < segments[i].end) {
                        currentSegment = i;
                        break;
                    }
                }
                updateSegmentIndicator();
            }
            
            animationId = requestAnimationFrame(animate);
        }

        // Воспроизведение/пауза
        function togglePlayPause() {
            if (isPlaying) {
                // Пауза
                pauseTime = performance.now();
                isPlaying = false;
                playPauseBtn.textContent = "▶ Воспроизведение";
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            } else {
                // Воспроизведение
                if (pauseTime > 0) {
                    startTime += performance.now() - pauseTime;
                }
                isPlaying = true;
                isManualSegment = false;
                playPauseBtn.textContent = "⏸ Пауза";
                animate();
            }
        }

        // Переход к следующему сегменту (ПРОТИВ ЧАСОВОЙ СТРЕЛКИ)
        function nextStep() {
            isManualSegment = true;
            isPlaying = false;
            playPauseBtn.textContent = "▶ Воспроизведение";
            
            // Двигаемся против часовой стрелки (увеличиваем угол)
            if (currentSegment < segments.length - 1) {
                currentSegment++;
            } else {
                currentSegment = 0;
            }
            
            updatePosition(keyPoints[currentSegment]);
            updateSegmentIndicator();
        }

        // Переход к предыдущему сегменту (ПО ЧАСОВОЙ СТРЕЛКИ)
        function prevStep() {
            isManualSegment = true;
            isPlaying = false;
            playPauseBtn.textContent = "▶ Воспроизведение";
            
            // Двигаемся по часовой стрелке (уменьшаем угол)
            if (currentSegment > 0) {
                currentSegment--;
            } else {
                currentSegment = segments.length - 1;
            }
            
            updatePosition(keyPoints[currentSegment]);
            updateSegmentIndicator();
        }

        // Сброс анимации
        function resetAnimation() {
            isPlaying = false;
            isManualSegment = false;
            currentSegment = 0;
            startTime = performance.now();
            pauseTime = 0;
            
            playPauseBtn.textContent = "▶ Воспроизведение";
            updatePosition(keyPoints[0]);
            updateSegmentIndicator();
            
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
        }

        // Обновление скорости
        function updateSpeed() {
            speed = parseFloat(speedSlider.value);
            speedValue.textContent = `${speed.toFixed(1)}x`;
            
            if (isPlaying) {
                // Корректируем startTime для плавного изменения скорости
                const currentAngle = getCurrentAngle();
                startTime = performance.now() - (currentAngle * 8000) / (2 * Math.PI * speed);
            }
        }

        // Переход к конкретному сегменту
        function goToSegment(segmentIndex) {
            if (segmentIndex >= 0 && segmentIndex < segments.length) {
                isManualSegment = true;
                isPlaying = false;
                playPauseBtn.textContent = "▶ Воспроизведение";
                currentSegment = segmentIndex;
                
                updatePosition(keyPoints[currentSegment]);
                updateSegmentIndicator();
                
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            }
        }

        // Инициализация
        function init() {
            updatePosition(keyPoints[0]);
            updateSegmentIndicator();
            
            // Назначение обработчиков событий
            playPauseBtn.addEventListener('click', togglePlayPause);
            prevStepBtn.addEventListener('click', prevStep);
            nextStepBtn.addEventListener('click', nextStep);
            resetBtn.addEventListener('click', resetAnimation);
            speedSlider.addEventListener('input', updateSpeed);
            
            segmentBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const segmentIndex = parseInt(btn.dataset.segment);
                    goToSegment(segmentIndex);
                });
            });
            
            // Запуск анимации (на паузе)
            animate();
        }

        init();
    </script>
</body>
</html>